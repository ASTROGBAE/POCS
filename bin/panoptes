#!/usr/bin/env python3

import os
import sys
import argparse

# Append the POCS dir to the system path.
pocs_dir = os.getenv('POCS', '/var/panoptes/POCS')

sys.path.append(pocs_dir)

from panoptes.core import Panoptes


def main():
    parser = argparse.ArgumentParser(
        description='Start the PANOPTES unit.',
        epilog="Don't forget to set the $POCS environment variable."
    )
    parser.add_argument('--simulator', action="append",
                        help='Run the unit in simulator mode. Possible values are: all, mount, camera, weather')
    parser.add_argument('-v', '--verbose', action='store_true', default=False, help='Verbose mode')
    parser.add_argument('-d', '--debug', action='store_true', default=False, help='Debug mode')

    args = parser.parse_args()

    # Create the unit and start up.
    pan = Panoptes(simulator=args.simulator, debug=args.debug)
    pan.run()


if __name__ == '__main__':

    if not os.getenv('POCS'):
        sys.exit("Please set the POCS environment variable.")

    main()
